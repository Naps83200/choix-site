function doGet(e) {
     Logger.log("Requête GET reçue");
     return ContentService.createTextOutput("Ce script est conçu pour des requêtes POST.");
   }

   function doPost(e) {
     Logger.log("Requête POST reçue");
     var params = e ? JSON.parse(e.postData.contents) : {tagId: "TEST_TAG_ID"};
     var tagId = params.tagId;
     var timestamp = new Date().toLocaleString();
     
     Logger.log("Tag ID reçu: " + tagId);
     
     var emailAddress = "misteurnapster@gmail.com"; // Remplacez par votre adresse email
     var subject = "Tag NFC scanné";
     var message = "Le tag NFC avec l'ID " + tagId + " a été scanné le " + timestamp;
     
     try {
       GmailApp.sendEmail(emailAddress, subject, message);
       Logger.log("Email envoyé avec succès");
       return ContentService.createTextOutput("Succès");
     } catch (error) {
       Logger.log("Erreur lors de l'envoi de l'email: " + error.toString());
       return ContentService.createTextOutput("Erreur: " + error.toString());
     }
   }

   // Fonction de test
   function testDoPost() {
     var testEvent = {
       postData: {
         contents: JSON.stringify({tagId: "TEST_TAG_ID"})
       }
     };
     doPost(testEvent);
   }
   
