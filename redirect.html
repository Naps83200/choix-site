<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Redirection</title>
    <script>
        function logAccess() {
            var tagId = new URLSearchParams(window.location.search).get('tag');
            if (tagId) {
                console.log("Tag ID détecté:", tagId);
                var url = 'https://script.google.com/macros/s/VOTRE_ID_DE_DEPLOIEMENT/exec?tagId=' + encodeURIComponent(tagId);
                fetch(url, {
                    method: 'GET',
                })
                .then(response => {
                    console.log("Statut de la réponse:", response.status);
                    return response.json();
                })
                .then(data => {
                    console.log("Réponse du script:", data);
                    if (data.status === "success") {
                        window.location.href = 'index.html'; // ou votre URL Instagram
                    } else {
                        throw new Error(data.message);
                    }
                })
                .catch(error => {
                    console.error("Erreur détaillée:", error);
                    document.getElementById('error-message').textContent = "Erreur: " + error.message;
                });
            } else {
                console.log("Aucun Tag ID détecté");
                document.getElementById('error-message').textContent = "Aucun Tag ID détecté";
            }
        }
    </script>
</head>
<body onload="logAccess()">
    <p>Redirection en cours...</p>
    <div id="error-message" style="color: red;"></div>
</body>
</html>
